<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Sundar Kanya ❤️</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Short+Stack&family=Homemade+Apple&display=swap">
  <link rel="stylesheet" href="./style.css">
</head>
<body>
  <!-- 🌗 Mode Toggle Button -->
  <button class="toggle-btn" id="modeToggle">🌞</button>

  <!-- 📤 Upload Button -->
  <div class="upload-container">
    <input type="file" id="imageUpload" accept="image/*" multiple hidden />
    <label for="imageUpload" class="upload-btn">📤 Upload 3 Images</label>
  </div>

  <!-- ❤️ Heart Paper -->
  <div class="paper heart"></div>

  <!-- 🖼️ Preloaded Papers -->
  <div class="paper image">
    <p> and I fallen in</p>
    <p>Love with You 😍 </p>
    <img src="images/1.jpg" />
  </div>

  <div class="paper image">
    <p></p>
    <img src="images/2.jpg" />
  </div>

  <div class="paper image">
    <p>How can be </p>
    <p> someone so cute ❤️ </p>
    <img src="images/3.jpg" />
  </div>

  <div class="paper red">
    <p class="p1"> and My Favorite</p>
    <p class="p2">Person 😍</p>
  </div>

  <div class="paper">
    <p class="p1">You are Cute </p>
    <p class="p1">Amazing <span style="color: red !important;">❤️</span></p>
  </div>

  <div class="paper">
    <p class="p1">Drag the papers to move!</p>
  </div>

  <!-- 🌟 Script Section -->
<script>
  const toggleBtn = document.getElementById('modeToggle');
  const body = document.body;

  // 🌞 Initial Mode
  body.classList.add('day-mode');
  toggleBtn.textContent = '🌞';

  toggleBtn.addEventListener('click', () => {
    if (body.classList.contains('day-mode')) {
      body.classList.remove('day-mode');
      body.classList.add('night-mode');
      toggleBtn.textContent = '🌙';
    } else {
      body.classList.remove('night-mode');
      body.classList.add('day-mode');
      toggleBtn.textContent = '🌞';
    }
  });

  // 📤 Handle Image Upload (Rebuild Page)
  const imageUpload = document.getElementById('imageUpload');

  imageUpload.addEventListener('change', (event) => {
    const files = Array.from(event.target.files);
    if (files.length !== 3) {
      alert("Please upload exactly 3 images.");
      return;
    }

    const readers = files.map(file => {
      return new Promise((resolve) => {
        const reader = new FileReader();
        reader.onload = () => resolve(reader.result);
        reader.readAsDataURL(file);
      });
    });

    Promise.all(readers).then(images => {
      // 🔄 Clear existing content
      document.body.innerHTML = '';

      // 🌗 Re-add toggle and upload
      const toggleBtn = document.createElement('button');
      toggleBtn.className = 'toggle-btn';
      toggleBtn.id = 'modeToggle';
      toggleBtn.textContent = body.classList.contains('night-mode') ? '🌙' : '🌞';
      document.body.appendChild(toggleBtn);

      const uploadContainer = document.createElement('div');
      uploadContainer.className = 'upload-container';
      uploadContainer.innerHTML = `
        <input type="file" id="imageUpload" accept="image/*" multiple hidden />
        <label for="imageUpload" class="upload-btn">📤 Upload 3 Images</label>
      `;
      document.body.appendChild(uploadContainer);

      // 🖼️ Create new papers with uploaded images
      images.forEach((src, index) => {
        const paper = document.createElement('div');
        paper.className = 'paper image';
        paper.innerHTML = `
          <p>Photo ${index + 1}</p>
          <img src="${src}" />
        `;
        document.body.appendChild(paper);
      });

      // 💬 Add message paper
      const messagePaper = document.createElement('div');
      messagePaper.className = 'paper';
      messagePaper.innerHTML = `<p class="p1">Your personalized animation 💖</p>`;
      document.body.appendChild(messagePaper);

      // 🔁 Reattach script
      const ua = navigator.userAgent;
      const script = document.createElement('script');
      script.src = /Mobi|Android/i.test(ua) ? './mobile.js' : './script.js';
      document.body.appendChild(script);
    });
  });

  // 📱 Device Detection
  const ua = navigator.userAgent;
  const script = document.createElement('script');
  script.src = /Mobi|Android/i.test(ua) ? './mobile.js' : './script.js';
  document.body.appendChild(script);
</script>

</body>
</html>
